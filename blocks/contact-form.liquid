{% capture submit_button %}
  {% content_for 'block', type: 'contact-form-submit-button', id: 'submit-button' %}
{% endcapture %}

{%- comment -%} Pass the whole block so the snippet can render nested child blocks (like request_select) {%- endcomment -%}
{% render 'contact-form', settings: block.settings, submit_button: submit_button, block: block %}

{% schema %}
{
  "name": "t:names.contact_form",
  "tag": null,
  "settings": [
    {
      "type": "select",
      "id": "width",
      "label": "t:settings.width_desktop",
      "options": [
        { "value": "fit-content", "label": "t:options.fit_content" },
        { "value": "custom", "label": "t:options.custom" }
      ],
      "default": "fit-content"
    },
    {
      "type": "range",
      "id": "custom_width",
      "label": "t:settings.width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width == 'custom' }}"
    },
    {
      "type": "select",
      "id": "width_mobile",
      "label": "t:settings.width_mobile",
      "options": [
        { "value": "fit-content", "label": "t:options.fit_content" },
        { "value": "custom", "label": "t:options.custom" }
      ],
      "default": "fit-content"
    },
    {
      "type": "range",
      "id": "custom_width_mobile",
      "label": "t:settings.width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width_mobile == 'custom' }}"
    },
    {
      "type": "checkbox",
      "id": "inherit_color_scheme",
      "label": "t:settings.inherit_color_scheme",
      "default": true
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "scheme-1",
      "visible_if": "{{ block.settings.inherit_color_scheme == false }}"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "t:settings.left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "t:settings.right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "Form fields"
    },
    {
      "type": "checkbox",
      "id": "include_select",
      "label": "Include dropdown",
      "default": false
    },
    {
      "type": "text",
      "id": "select_label",
      "label": "Dropdown label",
      "default": "What is this regarding?",
      "visible_if": "{{ block.settings.include_select }}"
    },
    {
      "type": "checkbox",
      "id": "select_required",
      "label": "Required",
      "default": false,
      "visible_if": "{{ block.settings.include_select }}"
    },
    {
      "type": "text",
      "id": "option_1",
      "label": "Option 1",
      "default": "",
      "visible_if": "{{ block.settings.include_select }}"
    },
    {
      "type": "text",
      "id": "option_2",
      "label": "Option 2",
      "default": "",
      "visible_if": "{{ block.settings.include_select }}"
    },
    {
      "type": "text",
      "id": "option_3",
      "label": "Option 3",
      "default": "",
      "visible_if": "{{ block.settings.include_select }}"
    },
    {
      "type": "text",
      "id": "option_4",
      "label": "Option 4",
      "default": "",
      "visible_if": "{{ block.settings.include_select }}"
    },
    {
      "type": "text",
      "id": "option_5",
      "label": "Option 5",
      "default": "",
      "visible_if": "{{ block.settings.include_select }}"
    },
    {
      "type": "text",
      "id": "option_6",
      "label": "Option 6",
      "default": "",
      "visible_if": "{{ block.settings.include_select }}"
    }
  ],
  "blocks": [
    {
      "type": "request_select",
      "name": "Dropdown",
      "settings": [
        { "type": "text", "id": "select_label", "label": "Dropdown label", "default": "What is this regarding?" },
        { "type": "checkbox", "id": "select_required", "label": "Required", "default": false },
        { "type": "text", "id": "option_1", "label": "Option 1", "default": "Returns" },
        { "type": "text", "id": "option_2", "label": "Option 2", "default": "Shipping" },
        { "type": "text", "id": "option_3", "label": "Option 3", "default": "Custom order" },
        { "type": "text", "id": "option_4", "label": "Option 4", "default": "Other" },
        { "type": "text", "id": "option_5", "label": "Option 5", "default": "" },
        { "type": "text", "id": "option_6", "label": "Option 6", "default": "" }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:names.contact_form",
      "category": "t:categories.forms"
    }
  ]
}
{% endschema %}
