{% capture submit_button %}
  {% content_for 'block', type: 'contact-form-submit-button', id: 'submit-button' %}
{% endcapture %}

{% render 'contact-form', settings: block.settings, submit_button: submit_button %}

{% schema %}
{
  "name": "t:names.contact_form",
  "tag": null,
  "settings": [
    {
      "type": "select",
      "id": "width",
      "label": "t:settings.width_desktop",
      "options": [
        {
          "value": "fit-content",
          "label": "t:options.fit_content"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "fit-content"
    },
    {
      "type": "range",
      "id": "custom_width",
      "label": "t:settings.width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width == 'custom' }}"
    },
    {
      "type": "select",
      "id": "width_mobile",
      "label": "t:settings.width_mobile",
      "options": [
        {
          "value": "fit-content",
          "label": "t:options.fit_content"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "fit-content"
    },
    {
      "type": "range",
      "id": "custom_width_mobile",
      "label": "t:settings.width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width_mobile == 'custom' }}"
    },
    {
      "type": "checkbox",
      "id": "inherit_color_scheme",
      "label": "t:settings.inherit_color_scheme",
      "default": true
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "scheme-1",
      "visible_if": "{{ block.settings.inherit_color_scheme == false }}"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "t:settings.left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "t:settings.right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "カスタム プルダウン設定"
    },
    // ★★★ このチェックボックスを追加 ★★★
    {
      "type": "checkbox",
      "id": "show_dropdown",
      "label": "プルダウンメニューを表示する",
      "default": true
    },
    // ★★★ ここまで追加 ★★★
    {
      "type": "text",
      "id": "dropdown_label",
      "label": "プルダウンのラベル名",
      "default": "お問い合わせの種類",
      "visible_if": "{{ block.settings.show_dropdown }}" // 非表示のときは設定も隠す
    },
    // ... 既存のプルダウン設定（dropdown_name_attribute, dropdown_options_list）にも 'visible_if' を追加します ...
    {
      "type": "text",
      "id": "dropdown_name_attribute",
      "label": "フォーム送信名 (英語・内部用)",
      "default": "subject",
      "info": "この名前が送信されるデータに使用されます (例: contact[subject])",
      "visible_if": "{{ block.settings.show_dropdown }}" // 追加
    },
    {
      "type": "textarea", 
      "id": "dropdown_options_list",
      "label": "プルダウンの項目一覧",
      "default": "サポート,見積もり,その他",
      "info": "項目をカンマ (,) で区切って入力してください。最初の項目が値(value)と表示名(label)の両方に使用されます。",
      "visible_if": "{{ block.settings.show_dropdown }}" // 追加
    }
  ],
  "presets": [
    {
      "name": "t:names.contact_form",
      "category": "t:categories.forms"
    }
  ]
}
{% endschema %}