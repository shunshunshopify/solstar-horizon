{%- doc -%}
  Renders a draggable before/after image comparison.

  @param {object} before_image - Before state image object
  @param {object} after_image - After state image object
  @param {string} before_label - Label shown on the before image
  @param {string} after_label - Label shown on the after image
{%- enddoc -%}
{%- liquid
  assign aspect_ratio = after_image.aspect_ratio | default: before_image.aspect_ratio
-%}

<compare-images class="compare" style="--compare-position: 50%;">
  <div
    class="compare__frame"
    style="{% if aspect_ratio %}aspect-ratio: {{ aspect_ratio }};{% endif %}"
  >
    <div class="compare__image compare__image--after">
      <div class="compare__media">
        {%- if after_image != blank -%}
          {% render 'image', image: after_image, class: 'compare__image-media' %}
        {%- else -%}
          {{ 'image' | placeholder_svg_tag: 'placeholder-svg compare__placeholder' }}
        {%- endif -%}
      </div>

      {%- if after_label != blank -%}
        <div class="compare__label compare__label--after">
          {{ after_label }}
        </div>
      {%- endif -%}
    </div>

    <div class="compare__image compare__image--before" data-compare-before>
      <div class="compare__media">
        {%- if before_image != blank -%}
          {% render 'image', image: before_image, class: 'compare__image-media' %}
        {%- else -%}
          {{ 'image' | placeholder_svg_tag: 'placeholder-svg compare__placeholder' }}
        {%- endif -%}
      </div>

      {%- if before_label != blank -%}
        <div class="compare__label compare__label--before">
          {{ before_label }}
        </div>
      {%- endif -%}
    </div>

    <div class="compare__divider" aria-hidden="true">
      <span class="compare__line"></span>
      <button class="compare__handle" type="button" aria-label="Drag to compare">
        {% render 'icon-arrow-separate' %}
      </button>
    </div>
  </div>
</compare-images>
